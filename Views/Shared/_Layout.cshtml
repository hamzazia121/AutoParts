@using System.Security.Claims
<!DOCTYPE html>
<html class="no-js" lang="zxx">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>AutoPartsHub - Car Parts Store eCommerce HTML Template</title>

    <!--== Favicon ==-->
    <link rel="shortcut icon" href="/assets/img/AutoLogo.png" type="image/x-icon" />

    <!--== Google Fonts ==-->
    <link href="https://fonts.googleapis.com/css?family=Oswald:400,500,600,700%7CPoppins:400,400i,500,600&amp;display=swap" rel="stylesheet">

    <!-- build:css ./assets/css/app.min.css -->
    <!--== Leaflet Min CSS ==-->
    <link href="/assets/css/leaflet.min.css" rel="stylesheet" />
    <!--== Nice Select Min CSS ==-->
    <link href="/assets/css/nice-select.min.css" rel="stylesheet" />
    <!--== Slick Slider Min CSS ==-->
    <link href="/assets/css/slick.min.css" rel="stylesheet" />
    <!--== Magnific Popup Min CSS ==-->
    <link href="/assets/css/magnific-popup.min.css" rel="stylesheet" />
    <!--== Slicknav Min CSS ==-->
    <link href="/assets/css/slicknav.min.css" rel="stylesheet" />
    <!--== Animate Min CSS ==-->
    <link href="/assets/css/animate.min.css" rel="stylesheet" />
    <!--== Ionicons Min CSS ==-->
    <link href="/assets/css/ionicons.min.css" rel="stylesheet" />
    <!--== Font-Awesome Min CSS ==-->
    <link href="/assets/css/font-awesome.min.css" rel="stylesheet" />
    <!--== Bootstrap Min CSS ==-->
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
    <!--== Main Style CSS ==-->
    <link href="/assets/css/style.css" rel="stylesheet" />
    <!--== Helper Min CSS ==-->
    <link href="/assets/css/helper.min.css" rel="stylesheet" />
    <!-- endbuild -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <style>
        .modal-content {
            width: 60% !important;
        }
        .user img{
            width:2rem !important
        }
    </style>
    @RenderSection("Styles", required: false)
</head>

<body>


    <!--== Start Header Area ==-->
    <header class="header-area">
        <div class="container container-wide">
            <div class="row align-items-center">
                <div class="col-sm-4 col-lg-2">
                    <div class="site-logo text-center text-sm-start">
                        <a href="/"><img src="/assets/img/AutoLogo2.png" alt="Logo" /></a>
                    </div>
                </div>

                <div class="col-lg-7 d-none d-lg-block">
                    <div class="site-navigation">
                        <ul class="main-menu nav">


                            <li><a href="/">Home</a></li>

                            <li><a asp-controller="Home" asp-action="About">About</a></li>
                            <li><a asp-controller="Home" asp-action="Shop">Shop</a></li>
                            <li><a asp-controller="Home" asp-action="Blog">Blogs</a></li>


                            <li><a asp-controller="Home" asp-action="Gallery">Gallery</a></li>
                          @*   @if (User.IsInRole("Admin") || User.IsInRole("Customer"))
                            {

                                <li class="has-submenu">
                                    <a href="#">Pages</a>
                                    <ul class="sub-menu">
                                        <li><a asp-controller="Home" asp-action="ConfirmOrder">Confirm Order</a></li>
                                       <li><a asp-controller="Home" asp-action="Checkout">Checkout</a></li>

                                    </ul>
                                </li>
                            } *@
                            <li><a asp-controller="Home" asp-action="WishList">Wishlist</a></li>
                            <li><a asp-controller="Home" asp-action="ContactUS">Contact US</a></li>
                        </ul>
                    </div>
                </div>

                <div class="col-sm-8 col-lg-3">
                    <div class="site-action d-flex justify-content-center justify-content-sm-end align-items-center">
                        <ul class="main-menu nav">
                            @if (User.Identity.IsAuthenticated)
                            {
                                var name = User.Claims.FirstOrDefault(c => c.Type == ClaimTypes.Name)?.Value;
                                <li class="has-submenu" style="width:6rem">
                                    <div class="d-flex flex-column justify-content-center user">
                                        @* <img src="./assets/img/user1.png"  alt="error in img" /> *@
                                    <a href="#"> @name </a>
                                    </div>
                                    <ul class="sub-menu">
                                        @if (User.IsInRole("Admin"))
                                        {
                                            <li>
                                                <a href="/AdminDashboard/index">
                                                    <svg id="icon-user1" xmlns="http://www.w3.org/2000/svg" class="text-primary" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>

                                                    <span class="ms-2">Dashboard</span>
                                                </a>
                                            </li>


                                        }

                                        <li>
                                            <a asp-controller="Home" asp-action="MyAccount" class="dropdown-item ai-icon">
                                                <svg id="icon-user1" xmlns="http://www.w3.org/2000/svg" class="text-primary" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                                                <span class="ms-2">Profile </span>
                                            </a>
                                        </li>


                                        <li>

                                            <a href="Logout" class="dropdown-item ai-icon">
                                                <svg id="icon-logout" xmlns="http://www.w3.org/2000/svg" class="text-danger" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                                                <span class="ms-2">Logout </span>
                                            </a>
                                        </li>


                                    </ul>
                                </li>
                            }
                            else
                            {
                                <li><a id="Login" class="btn btn-light rounded-pill">Login</a></li>
                                <li><a id="Registeration" class="btn btn-light rounded-pill">Register</a></li>
                            }
                        </ul>

                        <div class="mini-cart-wrap">
                            <a asp-controller="Home" asp-action="Cart" class="btn-mini-cart">
                                <i class="ion-bag"></i>
                                <span class="cart-total" id="cartTotalId">0</span>
                            </a>

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </header>
    <!--== End Header Area ==-->
    <!--== Start Slider Area Wrapper ==-->
    @RenderBody()
    <footer class="footer-area">
        <div class="footer-widget-area">
            <div class="container container-wide">
                <div class="row mtn-40">
                    <div class="col-lg-3">
                        <div class="widget-item">
                            <div class="about-widget">
                                <a asp-controller="Home" asp-action="index"><img src="/assets/img/AutoLogo.png" alt="Logo" /></a>
                                <p>
                                    AutoPartsHub is the best parts shop for your car
                                    accessories. What kind of parts do you
                                    need you can get here soluta nobis
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-lg-2">
                        <div class="widget-item">
                            <h4 class="widget-title">Information</h4>
                            <div class="widget-body">
                                <ul class="widget-list">
                                    <li><a href="#">Our company</a></li>
                                    <li><a asp-controller="Home" asp-action="ContactUS">Contact us</a></li>
                                    <li><a href="#">Our services</a></li>
                                    <li><a href="#">Why We?</a></li>
                                    <li><a href="#">Careers</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-lg-2">
                        <div class="widget-item">
                            <h4 class="widget-title">Quicklink</h4>
                            <div class="widget-body">
                                <ul class="widget-list">
                                    <li><a href="about">About</a></li>
                                    <li><a href="blog">Blog</a></li>
                                    <li><a href="shop">Shop</a></li>
                                    <li><a asp-controller="Home" asp-action="Cart">Cart</a></li>
                                    <li><a asp-controller="Home" asp-action="ContactUS">Contact</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-lg-2">
                        <div class="widget-item">
                            <h4 class="widget-title">Support</h4>
                            <div class="widget-body">
                                <ul class="widget-list">
                                    <li><a href="blog">Blog</a></li>
                                    <li><a asp-controller="Home" asp-action="ContactUS">Contact</a></li>
                                    <li><a href="#">Return Policy</a></li>
                                    <li><a href="#">Online Support</a></li>
                                    <li><a href="#">Money Back</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-lg-3">
                        <div class="widget-item">
                            <h4 class="widget-title">Store Information</h4>
                            <div class="widget-body">
                                <address>
                                    2024 Stokes , Peshawar 25000, Pakistan <br>
                                    <a href="https://example.com">https://example.com</a> <br>
                                    (+92) 3369440406
                                </address>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer-copyright-area">
            <div class="container">
                <div class="row">
                    <div class="col-12 text-center">
                        <div class="copyright-content">
                            <p>
                                &copy; AutoPartsHub,
                                <script>
                                    document.write(new Date().getFullYear())
                                </script>
                                .
                                Made With <i class="fa fa-heart text-danger"></i> by
                                <a href="#" target="_blank">HubSolution</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--== End Footer Area Wrapper ==-->
    <!-- Scroll Top Button -->
    <button class="btn-scroll-top"><i class="ion-chevron-up"></i></button>


    <!--== Start Responsive Menu Wrapper ==-->
    <aside class="off-canvas-wrapper off-canvas-menu">
        <div class="off-canvas-overlay"></div>
        <div class="off-canvas-inner">
            <!-- Start Off Canvas Content -->
            <div class="off-canvas-content">
                <div class="off-canvas-header">
                    <div class="logo">
                        <a href="/"><img src="/assets/img/logo.png" alt="Logo"></a>
                    </div>
                    <div class="close-btn">
                        <button class="btn-close"><i class="ion-android-close"></i></button>
                    </div>
                </div>

                <!-- Content Auto Generate Form Main Menu Here -->
                <div class="res-mobile-menu mobile-menu">
                </div>
            </div>
        </div>
    </aside>
    <div class="modal fade bd-example-modal-lg" id="LoginModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="CreateModalHeader">User Login</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal">
                    </button>
                </div>

                @await Html.PartialAsync("/Views/Authentication/_Login.cshtml", new Login())


            </div>
        </div>
    </div>

    <div class="modal fade bd-example-modal-lg" id="RegisterationModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="CreateModalHeader">User Login</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal">
                    </button>
                </div>

                @await Html.PartialAsync("/Views/Authentication/_Registeration.cshtml", new Registeration())


            </div>
        </div>
    </div>
    <!--== End Responsive Menu Wrapper ==-->
    <!--=======================Javascript============================-->
    <!-- build:js ./assets/js/app.min.js -->
    <!--=== Modernizr Min Js ===-->

    <script src="/assets/js/modernizr-3.6.0.min.js"></script>
    <!--=== jQuery Min Js ===-->
    <script src="/assets/js/jquery.min.js"></script>
    <!--=== jQuery Migration Min Js ===-->
    <script src="/assets/js/jquery-migrate.min.js"></script>
    <!--=== Poppr Min Js ===-->
    <script src="/assets/js/popper.min.js"></script>
    <!--=== Bootstrap Min Js ===-->
    <script src="/assets/js/bootstrap.min.js"></script>
    <!--=== Slicknav Min Js ===-->
    <script src="/assets/js/jquery.slicknav.min.js"></script>
    <!--=== Magnific Popup Min Js ===-->
    <script src="/assets/js/jquery.magnific-popup.min.js"></script>
    <!--=== Slick Slider Min Js ===-->
    <script src="/assets/js/slick.min.js"></script>
    <!--=== Nice Select Min Js ===-->
    <script src="/assets/js/jquery.nice-select.min.js"></script>
    <!--=== Leaflet Min Js ===-->
    <script src="/assets/js/leaflet.min.js"></script>
    <!--=== Countdown Js ===-->
    <script src="/assets/js/countdown.js"></script>
    <!--=== Active Js ===-->
    <script src="/assets/js/active.js"></script>

    <script>

        $(document).ready(function () {
            LoadCartData();
        });
        $("#Login").click(function () {


            $("#LoginModal").modal("show")

        });
        $("#Registeration").click(function () {


            $("#RegisterationModal").modal("show")

        });
        $(document).ajaxError(function (event, jqXHR) {
            if (jqXHR.status === 403) {
                $('#forbiddenModal').modal('show');
            }
        });
        function LoadCartData() {

            $.ajax({
                type: 'GET',
                url: '/GetCartCount',

                success: function (response) {
                    if (response.success) {
                      
                        $("#cartTotalId").html(response.message);
                        // Show success message
                    } else {
                        alert(response.message);
                    }
                },
                error: function () {
                    alert('Error occurred while adding item to cart');
                }
            });
        }
    </script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>